# Flow-matching
流匹配生成模型是一类深度生成模型，通过学习一个连续的时间路径，将一个简单的先验分布（如高斯噪声）变换成一个复杂的数据分布（如真实的图像、音频或文本）。
这个流由一个神经网络参数化的“速度场”（vector feild）来定义。告诉每个噪声点在每个时刻应该如何移动，最终能够流动到真实数据的样子。
## 与扩散模型的关系和区别
flow-matching模型是扩散模型的一种泛化和改进。它们之间有很强的联系，但是flow-matching有几个显著的优势：
1. 更快的生成速度：学习的是平滑、确定的路径，所以在生成样本的时候通常需要更少的步骤。（比如stable diffusion）
2. 更简单和稳定的训练，直接学习从a到b的速度场，避免加噪去噪
3. 可以选择更灵活、高效的路径将噪声转化为数据

## 流程
### 训练
模型随机抽取一个真实数据样本和一个噪声样本，然后计算出连接两个样本的路径，这个路径由一个神经网络来学习。
### 推理
从一个随机噪声开始，使用ODE求解器，根据神经网络预测的速度场计算出该点的轨迹。

## ODE
1. 奠基与萌芽 (17世纪末)

  背景：
  在牛顿和莱布尼茨之前，数学主要处理静态的问题（比如几何形状的面积、代数方程的解）。但物理世界是动态的，充满了变化，比如行星的运动、物体的下落。当时的数学语言无法精确描述这些“变化的过程”。
   * 牛顿的贡献：
     为了研究物理学，特别是运动和万有引力，牛顿创立了微积分。他的第二定律 F=ma(力 = 质量 × 加速度)本质上就是一个二阶常微分方程，因为加速度是位置对时间的二阶导数。他需要一种新的数学工具来描述“瞬时变化率”，并从这个变化率中推导出物体的运动轨迹。他称之为“流数术”(Method of Fluxions)。
   * 莱布尼茨的贡献：
     与此同时，莱布尼茨也独立地发展了微积分。他引入了我们今天仍在使用的优秀符号，比如 dy/dx 和积分符号 ∫。“微分方程” (differential equation)这个术语就是由莱布尼茨在1675年首次提出的。

  核心驱动力： ODE的诞生不是纯粹的数学游戏，而是为了给物理世界建模的迫切需求。

2. 发展与竞赛 (17世纪末 - 18世纪)

  微积分诞生后，立刻吸引了欧洲最聪明的一批数学家，特别是伯努利家族 (The Bernoulli brothers)。他们把解微分方程当作一种智力竞赛和挑战。

   * 他们提出并解决了许多经典的ODE问题，比如“悬链线问题”（一条两端固定的链条在重力下形成的形状）和“最速降线问题”（一个物体在重力作用下从A点到B点最快的下降路径是什么）。
   * 这些问题的解决过程极大地推动了ODE解法技巧的发展。

3. 系统化与成熟 (18世纪)

  进入18世纪，伟大的数学家莱昂哈德·欧拉 (Leonhard Euler)对ODE进行了系统性的整理和研究。

   * 他发展了大量的ODE求解方法，比如分离变量法、常数变易法、引入积分因子等。
   * 他还开创了数值解法的先河（如“欧拉法”），这对于今天用计算机求解复杂的ODE至关重要。
   * 在欧拉以及后来的拉格朗日、拉普拉斯等人的努力下，ODE理论逐渐成为一个成熟、系统的数学分支。

  总结
  ODE的来源可以概括为：
  它源于用数学语言精确描述宇宙中“变化”规律的渴望。牛顿和莱布尼茨创造了微积分这个语言，而早期的物理和几何问题（如天体运动、曲线形状）则是第一批用这种新语言写成的“文章”，这些“文章”就是最早的常微分方程。
